{"version":3,"sources":["main.js"],"names":[],"mappings":"aAAA;;;GAKA,CAAC,UAAU,CACP,aACA,GAAM,OAAQ,OAAO,KAAP,EAAgB,gBAA9B,CAEA,gBAAgB,KAAhB,CAAwB,CAAC,OAAO,MAAR,CAAxB,EAAyC,IAAzC,CAA8C,oBAAK,KAAI,IAAJ,EAAL,CAA9C,EAA+D,IAA/D,CAAoE,cAAM,CACtE,GAAM,MAAQ,SAAS,SAAT,CAAmB,CAC7B,IAAK,GAAI,MAAT,GAAiB,UAAjB,CAA4B,CACxB,MAAU,WAAU,KAAV,EAAgB,MAA1B,OAAsC,UAAU,KAAV,EAAgB,KAAhB,CAAsB,CAAtB,CACzC,CACJ,CAJY,CAIV,KAAK,YAAL,CAAkB,SAJR,CAAb,CAMA,UAAU,KAAK,SAAL,CAAe,MAAf,CAAsB,GAAtB,CAA0B,sBAAO,OAAM,WAAN,CAAkB,KAAlB,CAAwB,iBAAxB,EAA2C,CAA3C,CAAP,CAA1B,EAAgF,IAAhF,EAAV,EACA,MAAO,CACH,KAAK,IADF,CAEH,OAAO,KAAK,SAAL,CAAe,MAAf,CACF,GADE,CACE,sBAAO,OAAM,aAAN,EAAqB,MAArB,EAA6B,UAA7B,CAAP,CADF,EAEF,GAFE,CAEE,yBAAU,MAAK,YAAL,CAAkB,KAAlB,CAAwB,QAAxB,CAAV,CAFF,CAFJ,CAMV,CAdD,EAcG,IAdH,CAcQ,cAAM,CACV,SAAS,KAAK,MAAL,CAAY,GAAZ,CAAiB,wBAAS,KAAK,IAAd,CAAqB,KAAK,QAA1B,CAAjB,CAAT,EACA,KAAK,WACR,CAjBD,EAmBA,GAAM,WAAY,QAAZ,UAAY,CAAS,QAAT,CAAkB,CAChC,GAAI,QAAS,EAAE,QAAF,EAAY,IAAZ,CAAqB,SAAS,CAAT,CAArB,KAAoC,SAAS,SAAS,MAAT,CAAgB,CAAzB,CAApC,CAAb,CACA,WAAW,UAAW,CAClB,OAAO,OAAP,EACH,CAFD,CAEG,IAFH,CAGH,CALD,CAOA,GAAM,UAAW,QAAX,SAAW,CAAU,MAAV,CAAkB,CAC/B;AACA,GAAI,OAAQ,CAAZ,CACA,GAAI,OAAQ,EAAI,IAAhB,CACA,GAAI,MAAO,EAAE,WAAF,CAAX,CACA,GAAI,MAAO,EAAE,aAAF,CAAX,CACA,KAAK,MAAL,CAAY,KAAZ,EAAmB,IAAnB,CAAwB,KAAxB,CAA8B,OAAO,KAAP,CAA9B,EACA,MAAQ,CAAC,MAAM,CAAP,EAAY,OAAO,MAA3B,CACA,KAAK,MAAL,CAAY,WAAZ,EAAyB,IAAzB,CAA8B,KAA9B,CAAoC,OAAO,KAAP,CAApC,EACA,YAAY,UAAI,CACZ,KAAK,MAAL,CAAY,WAAZ,EAAyB,IAAzB,CAA8B,KAA9B,CAAoC,KAAK,IAAL,CAAU,KAAV,CAApC,EACA,KAAK,WAAL,CAAiB,IAAjB,EACA,MAAQ,CAAC,MAAM,CAAP,EAAY,OAAO,MAA3B,CACA,KAAK,IAAL,CAAU,KAAV,CAAgB,OAAO,KAAP,CAAhB,CACH,CALD,CAKE,KALF,CAMH,CACJ,CA9CD","file":"main.min.js","sourcesContent":["/**\n * by lcs@lcs.io\n * 2017-07-16\n */\n\n(function(){\n    'use strict';\n    const album = window.album || 'B0Z5qXGF1iS2iW';\n\n    fetch(`/album/${album}`,{method:'POST'}).then(req=>req.json()).then(data=>{\n        const host = (function(locations){\n            for( let host in locations ){\n                return `${locations[host].scheme}://${locations[host].hosts[0]}`\n            }\n        })(data.webasseturls.locations);\n\n        showTitle(data.webstream.photos.map(photo=>photo.dateCreated.match(/\\d{4}-\\d\\d-\\d\\d/)[0]).sort())\n        return {\n            host:host,\n            photos:data.webstream.photos\n                .map(photo=>photo['derivatives']['2049']['checksum'])\n                .map(checksum=>data.webasseturls.items[checksum])\n        };\n    }).then(data=>{\n        carousel(data.photos.map( item=>`${data.host}${item.url_path}` ));\n        data.dateCreated\n    });\n\n    const showTitle = function(dateList){\n        let $title = $('.title').html( `${dateList[0]}_${dateList[dateList.length-1]}`);\n        setTimeout(function() {\n            $title.fadeOut();\n        }, 5000);\n    };\n\n    const carousel = function( photos ){\n        //photos = photos.filter((a,i)=>i<3);\n        let index = 0;\n        let speed = 3 * 1000;\n        let $img = $('img.photo');\n        let $pre = $('img.preload');\n        $img.filter('.in').prop('src',photos[index]);\n        index = (index+1) % photos.length;\n        $img.filter(':not(.in)').prop('src',photos[index]);\n        setInterval(()=>{\n            $img.filter(':not(.in)').prop('src',$pre.prop('src'));\n            $img.toggleClass('in');\n            index = (index+1) % photos.length;\n            $pre.prop('src',photos[index]);\n        },speed);\n    };\n})();\n\n"]}